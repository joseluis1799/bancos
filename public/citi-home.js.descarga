function promotions(){}function addElement(e,t,i){var o=document.createElement("li"),r=t.promociones,n="/sitios/promociones/img/promociones/1000x600/"+r.urlImagenPromocion,a=r.tituloPromocion,s=r.negocio.nombre,l=e;return o.setAttribute("class","citi-carrousel-slide p-0 sm:p-10 sm:citi-col-1/4"),o.innerHTML='<div innerlink class="citi-card variant-primary variant-primary-mini layout-top with-media tabbable promotions"><div class="citi-card-container"><div class="citi-card-content-container"><figure class="citi-card-media"><img width="100" height="100" loading="lazy" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="'+n+'" alt="" /></figure><div class="citi-card-content divider p-10 sm:p-16 md:p-20"><a href="/sitios/promociones/promocion/detalle.html?id='+r.id+'" data-query-metric="s.pageName-'+l+"-PR"+i+'-Promotion-irPromocionesCitibanamex-ES/Mobile" data-query-metric-type="lid" class="citi-h5 md:citi-h4 font-normal mb-10 sm:mb-20 inline-block">'+s+'</a><p class="citi-h6 md:citi-h5 font-light">'+a+"</p></div></div></div></div>",o}promotions.prototype.constructor=promotions,promotions.prototype.getPromotions=function(e,t){return new Promise((function(i,o){("undefined"==typeof getInstancePromociones?CitiUtils.getScript("/assets/js/fw-library.js").then((function(){return getInstancePromociones()})):getInstancePromociones()).then((function(r){var n={entity:"pm_categorias_promociones_vd",operation:"getEntitiesByOptions",options:e,logicalOperator:"AND",page:"0",page_size:"10",orderBy:t,site:"5",cacheable:"true",part:"id,categorias.nombre,promociones.id,promociones.tituloPromocion,promociones.urlImagenPromocion,promociones.urlPromocionNegocio,promociones.negocio,banners.productos,banners.nombre,banners.nombreImagen,banners.descripcion"};r.getPromise(n).then((function(e){e.Error?o(e.Error):i(e)})).catch((function(e){o(e)}))}))}))},document.querySelectorAll("[data-exitmodal]").forEach((function(e){e.addEventListener("click",(function(e){var t=e.target.getAttribute("data-metrics");""==t&&null==metrica||(t=t.replace("s.pageName-",""),t=screen.width<768?t.replace("ES/",""):t.replace("/Mobile",""),document.getElementById("exitmodal-link").setAttribute("onclick","s.tl(this,'e',s.pageName+'-"+t+"')"))}))}));var getInfoPromotions=new promotions,result=[],position=null;function getDataPromotions(e,t,o,r,n,a){var s=null==n||""==n?"id,DESC":n,l=null==a||""==a?"id,DESC":a,c=document.getElementsByClassName("data-tabs-promotions")[0].children,d=document.getElementsByClassName("data-carrousel-promotions")[t];if(d.children.length<4){for(i=0;i<c.length;i++)c[i].children[0].classList.add("disabled"),c[i].children[0].classList.add("text-mono-dark-gray");d.parentElement.parentElement.parentElement.previousElementSibling&&(d.parentElement.parentElement.parentElement.previousElementSibling.classList.remove("hidden"),d.parentElement.parentElement.parentElement.classList.add("hidden")),getInfoPromotions.getPromotions(o,s).then((function(o){if((result=result.length>0?result.concat(o.data):o.data).length>3){var n=[],a=[];result.forEach((function(e){n.includes(e.id)||(n.push(e.id),a.push(e))}));var s=d.children.length;a.forEach((function(t,i){d.children.length<4&&null!=t.promociones&&d.appendChild(addElement(e,t,i+s))})),CitiUtils.optimizator.optimizerContainer(d),setTimeout((()=>{for(document.getElementsByClassName("spinner")[0].classList.add("hidden"),document.getElementsByClassName("containerPromotions")[0].classList.remove("hidden"),d.parentElement.parentElement.parentElement.previousElementSibling.classList.add("hidden"),d.parentElement.parentElement.parentElement.classList.remove("hidden"),i=0;i<c.length;i++)c[i].children[0].classList.remove("disabled"),c[i].children[0].classList.remove("text-mono-dark-gray");setNewUrl(),citi.Innerlink.init(),CitiMetrics.setQueryMetric(),fixCarrousels()}),3e3)}else getDataPromotions(e,t,r,"",l)})).catch((function(e){setNewUrl(),document.getElementById("seccionPromociones").classList.add("hidden"),citi.Innerlink.init()}))}else fixCarrousels()}function handlerClick(e){var t=e.target.dataset.item;if("item0"==t||"item1"==t||"item2"==t){var i=e.target.dataset;category=i.filterCategory.length>0&&"all"!=i.filterCategory?",categorias.id="+i.filterCategory:"",filter=i.filterPromotion.length>0?"activo=1,canales.id=11"+category+",promociones.tipopromocion.tipos.id="+i.filterPromotion:i.optionsFirstFilter,firstOrderBy=i.firstOrderby||"id,DESC",secondCategory=i.secondFilterCategory.length>0&&"all"!=i.secondFilterCategory?",categorias.id="+i.secondFilterCategory:"",optFilter=i.secondFilterPromotion.length>0?"activo=1,canales.id=11"+secondCategory+",promociones.tipopromocion.tipos.id="+i.secondFilterPromotion:i.optionsSecondFilter,secondOrderBy=i.secondOrderby||"id,DESC",result="","item0"==t?""==optFilter&&(optFilter="activo=1,canales.id=11,promociones.tipopromocion.tipos.id=1"):"item1"==t?""==optFilter&&(optFilter="activo=1,canales.id=11,categorias.id=2,promociones.tipopromocion.tipos.id=3"):"item2"==t&&""==optFilter&&(optFilter="esCarousel=1,activo=1,canales.id=11",orderBy="posicionesCarousel"),getDataPromotions(e.target.dataset.interactionMetric.replace("|",""),t.replace("item",""),filter,optFilter,firstOrderBy,secondOrderBy)}}function initPromotions(){var e=document.getElementsByClassName("getFirstPromotions")[0];if(e)if(category=e.getAttribute("data-filter-category").length>0&&"all"!=e.getAttribute("data-filter-category")?",categorias.id="+e.getAttribute("data-filter-category"):"",filter=e.getAttribute("data-filter-promotion").length>0?"activo=1,canales.id=11"+category+",promociones.tipopromocion.tipos.id="+e.getAttribute("data-filter-promotion"):e.getAttribute("data-options-first-filter"),firstOrderBy=e.getAttribute("data-first-orderby")||"id,DESC",secondCategory=e.getAttribute("data-second-filter-category").length>0&&"all"!=e.getAttribute("data-second-filter-category")?",categorias.id="+e.getAttribute("data-second-filter-category"):"",optFilter=e.getAttribute("data-second-filter-promotion").length>0?"activo=1,canales.id=11"+secondCategory+",promociones.tipopromocion.tipos.id="+e.getAttribute("data-second-filter-promotion"):e.getAttribute("data-options-second-filter"),secondOrderBy=e.getAttribute("data-second-orderby")||"id,DESC",getDataPromotions(e.getAttribute("data-interaction-metric").replace("|",""),0,filter,optFilter,firstOrderBy,secondOrderBy),setNewUrl(),document.addEventListener("click",handlerClick),screen.width>767&&screen.width<1025){var t=document.getElementsByClassName("isPortrait");for(i=1;i<t.length;i++)t[i].setAttribute("style","width:55%")}else if(screen.width<767){(t=document.getElementsByClassName("addFlex"))[0]&&(t[0].className+=" flex-col")}}function Blogs(){"undefined"==typeof getInstancePromociones?promiseBlogs=CitiUtils.getScript("/assets/js/fw-library.js").then((function(){return getInstancePromociones()})):promiseBlogs=getInstancePromociones(),this.mapCategories=[]}let getInfoblogs=new Blogs;function parseDate(e){var t=new Array("Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"),i=new Date(e),o=t[i.getMonth()];return((i.getDate()+1).toString().length<=1?"0"+(i.getDate()+1):i.getDate()+1)+"-"+o+"-"+i.getFullYear().toString().substr(0,4)}function diaDate(e){var t=parseDate(e).split("-");return t=t[0],(t-=1)<=9&&(t="0"+t),t}function mesDate(e){var t=parseDate(e).split("-");return t=t[1]}function anioDate(e){var t=parseDate(e).split("-");return t=t[2]}function sinAcentos(e){var t={"á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","ñ":"n","Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U","À":"A","È":"E","Ì":"I","Ò":"O","Ù":"U","Ñ":"N"};return e.replace(/[áàéèíìóòúùñ]/gi,(function(e){return t[e]}))}function fixCarrousels(){if(screen.width<1025){var e=citi.Carrousel.getCarrousels(),t=/^carrousel[012]$/;e.forEach((function(i){if(t.test(i.root.id)){var o=e.indexOf(i);i.destroy(),citi.Carrousel.getCarrousels().splice(o,1)}})),citi.Carrousel.init()}}function showComponentBlog(){CitiUtils.isMobile&&setTimeout((()=>{bnmx.CarrouselBuilder.getCarrousels[0].slideList=Array.from(document.querySelectorAll("bnmx-card.loaded"))}),500),document.querySelector(".sectionBlog").removeAttribute("hidden")}function setNewUrl(){var e="";"undefined"!=typeof s&&(e=s.pageName),e="MX|index";var t=document.getElementsByTagName("a");for(i=0;i<t.length;i++)if(null!=t[i].getAttribute("href")){if(t[i].getAttribute("href").split("?").length>2){var o=t[i].getAttribute("href").split("?");t[i].setAttribute("href",o[0]+"?"+o[1]+"&"+o[2])}-1!=t[i].getAttribute("href").indexOf("undefined")&&t[i].setAttribute("href",t[i].getAttribute("href").replace("undefined",e))}fixCarrousels()}Blogs.prototype.getCategories=function(){return new Promise((function(e,t){promiseBlogs.then((function(i){i.getPromise({entity:"bp_category",operation:"getAll",orderBy:"order,ASC",part:"id,title,image",site:"0"}).then((function(i){i.Error?t(i.Error):e(i)})).catch((function(e){t(e)}))}))}))},Blogs.prototype.getBlogsByCategory=function(e,t,i){return new Promise((function(o,r){promiseBlogs.then((function(n){let a={entity:"bp_item",orderBy:t,page:"0",page_size:i,part:"id,category.title,category.icon,image,title,description,publicationDate",site:"0"};"Todos"==e?a.operation="getAll":(a.operation="getEntitiesByOptions",a.options="category.id="+e),n.getPromise(a).then((function(e){e.Error?r(e.Error):o(e)})).catch((function(e){r(e)}))}))}))},Blogs.prototype.addCardsBlogs=function(e){let t=document.querySelector(".showBlogProducts"),i=CitiUtils.isMobile?4:3;e.forEach((function(e){t.children.length<i&&t.appendChild(getInfoblogs.addElementCard(e)),t.children.length==i&&(document.addEventListener("citi:generic-metrics-loaded",(function(e){getInfoblogs.queryMetric()})),bnmx.CarrouselBuilder.getCarrousels[0].slideList=Array.from(document.querySelectorAll("bnmx-card.loaded")),showComponentBlog())}))},Blogs.prototype.addElementCard=function(e){let t="../sitios/blog/"+e.category.title.toLowerCase()+"/";t+=sinAcentos(e.title.replace(/ /g,"-").replace("?","").replace("¿","").toLowerCase()+".html");let i=diaDate(e.publicationDate)+" de "+mesDate(e.publicationDate).toLowerCase()+" de "+anioDate(e.publicationDate),o="";e.title.replace("?","").replace("¿","").split(" ").forEach((e=>{let t=e.charAt(0),i=e.slice(1);o=o+t.toUpperCase()+i}));let r="s.pageName-TextoMiddle-information-IrBlog"+sinAcentos(e.category.title)+sinAcentos(o)+"-ES/Mobile";var n=document.createElement("bnmx-card");return n.setAttribute("tag","a"),n.setAttribute("href",t),n.setAttribute("data-query-metric-blog",r),n.setAttribute("data-query-metric-type-blog","lid"),n.setAttribute("class","loaded"),n.setAttribute("target","_blank"),n.setAttribute("slide-class","sm:w-1/3 sm:flex-shrink sm:mr-20 pt-40 pb-20 sm:pb-0"),n.setAttribute("style","--overflow: visibe"),n.innerHTML='<div class="w-full h-full flex flex-col justify-start items-start"><span class="bg-system-info p-10 mb-20 -mt-40 rounded-softer flex items-center justify-center text-mono-white">\t<bnmx-icon class="size-30" name="'+e.category.icon.replace(".svg#s","")+'"></bnmx-icon></span><p class="citi-h4 text-mono-gray font-normal mb-20">'+e.category.title.toUpperCase()+'</p><p class="citi-h4 font-normal mb-20">'+e.title+'</p><p class="citi-h5 mb-20">'+e.description+'</p>\x3c!--p class="citi-h6 text-mono-gray mt-auto">'+i+"</p--\x3e</div>",n},Blogs.prototype.queryMetric=function(){let e="";null!=s.pageName&&""!=s.pageName&&s.pageName||CitiMetrics.getSVar(),document.querySelectorAll("[data-query-metric-blog]").forEach((function(t){e=t.dataset.queryMetricBlog.replace("s.pageName",s.pageName),e=CitiUtils.isMobile?e.replace("ES/",""):e.replace("/Mobile",""),e=t.href+"?"+t.dataset.queryMetricTypeBlog+"="+e,t.shadowRoot.querySelector("a").setAttribute("href",e),t.removeAttribute("data-query-metric-blog"),t.removeAttribute("data-query-metric-type-blog")}))},Blogs.prototype.findCategorie=function(e){let t="",i=document.querySelector("[categoryBlog]").getAttribute("categoryBlog");return"Todos"==i||"todos"==i||"TODOS"==i?t="Todos":e.find((function(e){e.id!==parseInt(i)&&e.title!==i||(t=e.id)})),t},Blogs.prototype.initBlogs=function(){document.querySelector(".sectionBlog")&&this.getCategories().then((function(e){this.mapCategories=e.data;let t=getInfoblogs.findCategorie(this.mapCategories),i=document.querySelector("[categoryBlog]").getAttribute("orderBy"),o=document.querySelector(".showBlogProducts .bnmx-carrousel-track ul");o=o?o.children.length:0,o>0?(o=2,document.querySelector("bnmx-card").setAttribute("target","_blank"),document.querySelector("bnmx-card").querySelectorAll("div p")[3].setAttribute("hidden",!0)):o=3,t&&getInfoblogs.getBlogsByCategory(t,i,o).then((function(e){getInfoblogs.addCardsBlogs(e.data)}))}))},"complete"==document.readyState||"loaded"==document.readyState||"interactive"==document.readyState?(setNewUrl(),initPromotions(),getInfoblogs.initBlogs()):document.addEventListener("DOMContentLoaded",(function(){setNewUrl(),initPromotions(),getInfoblogs.initBlogs()}));var elementsHero=document.getElementsByClassName("data-slide-hero");for(i=0;i<elementsHero.length;i++){var slideSelected=("heroSlide"+i).toString();document.getElementById(slideSelected).addEventListener("click",(function(e){if(document.getElementById(slideSelected)){var t=document.querySelector("#"+this.getAttribute("id")+" div div div div a").getAttribute("target");if("_blank"!=t&&(t="_self"),"A"!=e.target.tagName){var i=this.getAttribute("data-interaction-metric");if(CitiMetrics.sendInteractionMetric(i),"true"!=this.getAttribute("data-exitmodal"))open(document.querySelector("#"+this.getAttribute("id")+" div div div div a").getAttribute("href"),t);else{let e=document.querySelector("#"+this.getAttribute("id")+" div div div div a").getAttribute("data-path"),t=document.querySelector("#"+this.getAttribute("id")+" div div div div a").getAttribute("data-sponsor"),i=document.querySelector("#"+this.getAttribute("id")+" div div div div a").getAttribute("data-metrics");i=CitiUtils.isMobile?i.replace("ES/",""):i.replace("/Mobile",""),document.getElementById("exitmodal-title").innerHTML='<h6 class="mb-10">Estás saliendo de citibanamex.com para entrar al sitio de '+t+"</h6>",document.getElementById("exitmodal-legal").innerHTML="<p>Entrarás a un sitio web ajeno a Citibanamex, el cual es responsable de sus propios contenidos y mantiene su política de privacidad y seguridad.</p>",document.getElementById("exitmodal-link").setAttribute("href",e),document.getElementById("exitmodal-link").setAttribute("onclick","s.tl(this,'e',s.pageName+'-"+i+"')"),citi.Navbar.Exitmodal.open("exitmodal"),document.getElementById("exitmodal-link").addEventListener("click",(function(){citi.Navbar.Exitmodal.close("exitmodal")}))}}}}))}var elementsEvent=document.getElementsByClassName("containerEvent");if(CitiUtils.isMobile)for(i=0;i<elementsEvent.length;i++)elementsEvent[i].setAttribute("innerlink","true");var componentsDoubleInteraction=document.querySelectorAll("[data-metInteractions]");for(i=0;i<componentsDoubleInteraction.length;i++){var componentSelected=componentsDoubleInteraction[i];componentSelected.addEventListener("click",(function(e){var t=componentSelected.querySelector("a").getAttribute("target");if("_blank"!=t&&(t="_self"),"A"!=e.target.tagName&&"BUTTON"!=e.target.tagName){var i=this.getAttribute("data-interaction-element");i&&CitiMetrics.sendInteractionMetric(i),componentSelected.querySelector("a").getAttribute("data-exitmodal")&&componentSelected.querySelector("button").getAttribute("data-exitmodal")||open(this.querySelector("a").getAttribute("href"),t)}}))}